<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Windows Remote Audio Controller</title>
</head>
<style>
*,::after,::before{box-sizing:border-box}:root{-moz-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji'}button{font-family:inherit;font-size:100%;line-height:1.15;margin:0;text-transform:none;-webkit-appearance:button}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}ul{list-style:none;margin:0;padding:0}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}body{font-family:inherit;line-height:inherit}*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}img{border-style:solid}button{cursor:pointer}button{padding:0;line-height:inherit;color:inherit}img{display:block;vertical-align:middle}img{max-width:100%;height:auto}.bg-gray-300{--tw-bg-opacity:1;background-color:rgba(209,213,219,var(--tw-bg-opacity))}.bg-indigo-600{--tw-bg-opacity:1;background-color:rgba(79,70,229,var(--tw-bg-opacity))}.rounded-md{border-radius:.375rem}.block{display:block}.flex{display:flex}.hidden{display:none}.items-center{align-items:center}.justify-between{justify-content:space-between}.m-2{margin:.5rem}.m-auto{margin:auto}.mt-8{margin-top:2rem}.max-w-screen-md{max-width:768px}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-4{padding-left:1rem;padding-right:1rem}*{--tw-shadow:0 0 #0000;--tw-ring-inset:var(--tw-empty,);--tw-ring-offset-width:0;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000}.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.w-full{width:100%}
</style>
<style>
.knob-surround{position:relative;background-color:grey;width:14rem;height:14rem;border-radius:50%;border:solid .25em #0e0e0e;margin:5em auto;background:#181818;background:-webkit-gradient(linear,left bottom,left top,color-stop(0,#1d1d1d),color-stop(1,#131313));background:-ms-linear-gradient(bottom,#1d1d1d,#131313);background:-moz-linear-gradient(center bottom,#1d1d1d 0,#131313 100%);background:-o-linear-gradient(#131313,#1d1d1d);-webkit-box-shadow:0 .2em .1em .05em rgba(255,255,255,.1) inset,0 -.2em .1em .05em rgba(0,0,0,.5) inset,0 .5em .65em 0 rgba(0,0,0,.3);-moz-box-shadow:0 .2em .1em .05em rgba(255,255,255,.1) inset,0 -.2em .1em .05em rgba(0,0,0,.5) inset,0 .5em .65em 0 rgba(0,0,0,.3);box-shadow:0 .2em .1em .05em rgba(255,255,255,.1) inset,0 -.2em .1em .05em rgba(0,0,0,.5) inset,0 .5em .65em 0 rgba(0,0,0,.3)}.knob{position:absolute;width:100%;height:100%;border-radius:50%;-webkit-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);z-index:10}.knob:before{content:"";position:absolute;bottom:19%;left:19%;width:3%;height:3%;background-color:#a8d8f8;border-radius:50%;-webkit-box-shadow:0 0 .4em 0 #79c3f4;-moz-box-shadow:0 0 .4em 0 #79c3f4;box-shadow:0 0 .4em 0 #79c3f4}.max,.min{display:block;color:rgba(255,255,255,.6);text-transform:uppercase;-webkit-font-smoothing:antialiased;font-size:70%;position:absolute}.min{bottom:1em;left:-2.5em}.max{bottom:1em;right:-2.5em}.tick{position:absolute;width:100%;height:100%;top:0;left:0;z-index:5;overflow:visible}.tick:after{content:"";width:.08em;height:.6em;background-color:rgba(255,255,255,.2);position:absolute;top:-1.5em;left:50%;-webkit-transition:all 180ms ease-out;-moz-transition:all 180ms ease-out;-o-transition:all 180ms ease-out;transition:all 180ms ease-out}.activetick:after{background-color:#a8d8f8;-webkit-box-shadow:0 0 .3em .08em #79c3f4;-moz-box-shadow:0 0 .3em .08em #79c3f4;box-shadow:0 0 .3em .08em #79c3f4;-webkit-transition:all 50ms ease-in;-moz-transition:all 50ms ease-in;-o-transition:all 50ms ease-in;transition:all 50ms ease-in}.tick:nth-child(1){-webkit-transform:rotate(-135deg);-moz-transform:rotate(-135deg);-o-transform:rotate(-135deg);-ms-transform:rotate(-135deg);transform:rotate(-135deg)}.tick:nth-child(2){-webkit-transform:rotate(-125deg);-moz-transform:rotate(-125deg);-o-transform:rotate(-125deg);-ms-transform:rotate(-125deg);transform:rotate(-125deg)}.tick:nth-child(3){-webkit-transform:rotate(-115deg);-moz-transform:rotate(-115deg);-o-transform:rotate(-115deg);-ms-transform:rotate(-115deg);transform:rotate(-115deg)}.tick:nth-child(4){-webkit-transform:rotate(-105deg);-moz-transform:rotate(-105deg);-o-transform:rotate(-105deg);-ms-transform:rotate(-105deg);transform:rotate(-105deg)}.tick:nth-child(5){-webkit-transform:rotate(-95deg);-moz-transform:rotate(-95deg);-o-transform:rotate(-95deg);-ms-transform:rotate(-95deg);transform:rotate(-95deg)}.tick:nth-child(6){-webkit-transform:rotate(-85deg);-moz-transform:rotate(-85deg);-o-transform:rotate(-85deg);-ms-transform:rotate(-85deg);transform:rotate(-85deg)}.tick:nth-child(7){-webkit-transform:rotate(-75deg);-moz-transform:rotate(-75deg);-o-transform:rotate(-75deg);-ms-transform:rotate(-75deg);transform:rotate(-75deg)}.tick:nth-child(8){-webkit-transform:rotate(-65deg);-moz-transform:rotate(-65deg);-o-transform:rotate(-65deg);-ms-transform:rotate(-65deg);transform:rotate(-65deg)}.tick:nth-child(9){-webkit-transform:rotate(-55deg);-moz-transform:rotate(-55deg);-o-transform:rotate(-55deg);-ms-transform:rotate(-55deg);transform:rotate(-55deg)}.tick:nth-child(10){-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-o-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg)}.tick:nth-child(11){-webkit-transform:rotate(-35deg);-moz-transform:rotate(-35deg);-o-transform:rotate(-35deg);-ms-transform:rotate(-35deg);transform:rotate(-35deg)}.tick:nth-child(12){-webkit-transform:rotate(-25deg);-moz-transform:rotate(-25deg);-o-transform:rotate(-25deg);-ms-transform:rotate(-25deg);transform:rotate(-25deg)}.tick:nth-child(13){-webkit-transform:rotate(-15deg);-moz-transform:rotate(-15deg);-o-transform:rotate(-15deg);-ms-transform:rotate(-15deg);transform:rotate(-15deg)}.tick:nth-child(14){-webkit-transform:rotate(-5deg);-moz-transform:rotate(-5deg);-o-transform:rotate(-5deg);-ms-transform:rotate(-5deg);transform:rotate(-5deg)}.tick:nth-child(15){-webkit-transform:rotate(5deg);-moz-transform:rotate(5deg);-o-transform:rotate(5deg);-ms-transform:rotate(5deg);transform:rotate(5deg)}.tick:nth-child(16){-webkit-transform:rotate(15deg);-moz-transform:rotate(15deg);-o-transform:rotate(15deg);-ms-transform:rotate(15deg);transform:rotate(15deg)}.tick:nth-child(17){-webkit-transform:rotate(25deg);-moz-transform:rotate(25deg);-o-transform:rotate(25deg);-ms-transform:rotate(25deg);transform:rotate(25deg)}.tick:nth-child(18){-webkit-transform:rotate(35deg);-moz-transform:rotate(35deg);-o-transform:rotate(35deg);-ms-transform:rotate(35deg);transform:rotate(35deg)}.tick:nth-child(19){-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.tick:nth-child(20){-webkit-transform:rotate(55deg);-moz-transform:rotate(55deg);-o-transform:rotate(55deg);-ms-transform:rotate(55deg);transform:rotate(55deg)}.tick:nth-child(21){-webkit-transform:rotate(65deg);-moz-transform:rotate(65deg);-o-transform:rotate(65deg);-ms-transform:rotate(65deg);transform:rotate(65deg)}.tick:nth-child(22){-webkit-transform:rotate(75deg);-moz-transform:rotate(75deg);-o-transform:rotate(75deg);-ms-transform:rotate(75deg);transform:rotate(75deg)}.tick:nth-child(19){-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.tick:nth-child(20){-webkit-transform:rotate(55deg);-moz-transform:rotate(55deg);-o-transform:rotate(55deg);-ms-transform:rotate(55deg);transform:rotate(55deg)}.tick:nth-child(21){-webkit-transform:rotate(65deg);-moz-transform:rotate(65deg);-o-transform:rotate(65deg);-ms-transform:rotate(65deg);transform:rotate(65deg)}.tick:nth-child(22){-webkit-transform:rotate(75deg);-moz-transform:rotate(75deg);-o-transform:rotate(75deg);-ms-transform:rotate(75deg);transform:rotate(75deg)}.tick:nth-child(23){-webkit-transform:rotate(85deg);-moz-transform:rotate(85deg);-o-transform:rotate(85deg);-ms-transform:rotate(85deg);transform:rotate(85deg)}.tick:nth-child(24){-webkit-transform:rotate(95deg);-moz-transform:rotate(95deg);-o-transform:rotate(95deg);-ms-transform:rotate(95deg);transform:rotate(95deg)}.tick:nth-child(25){-webkit-transform:rotate(105deg);-moz-transform:rotate(105deg);-o-transform:rotate(105deg);-ms-transform:rotate(105deg);transform:rotate(105deg)}.tick:nth-child(26){-webkit-transform:rotate(115deg);-moz-transform:rotate(115deg);-o-transform:rotate(115deg);-ms-transform:rotate(115deg);transform:rotate(115deg)}.tick:nth-child(27){-webkit-transform:rotate(125deg);-moz-transform:rotate(125deg);-o-transform:rotate(125deg);-ms-transform:rotate(125deg);transform:rotate(125deg)}.tick:nth-child(28){-webkit-transform:rotate(135deg);-moz-transform:rotate(135deg);-o-transform:rotate(135deg);-ms-transform:rotate(135deg);transform:rotate(135deg)}h1{font-weight:400;margin:2em 0}p{line-height:150%;max-width:36em;margin:1em auto}a{color:#aaa;text-decoration:none;border-bottom:1px solid #444;-webkit-transition:color .2s ease-in;-moz-transition:color .2s ease-in;-o-transition:color .2s ease-in;transition:color .2s ease-in}a:focus,a:hover{color:#eee}body{background:#282828}.bg-button{background:#535353}.bg-active-button{background:#121212}.knob-label{display:flex;color:rgba(255,255,255,.7);text-transform:uppercase;font-size:48px;position:absolute;width:100%;height:100%;justify-content:center;align-items:center}.knob-label>span{margin-bottom:12px}.knob-surround{display:none}
</style>
<body><ul id="app" class="w-full m-auto mt-8 max-w-screen-md"></ul><div class="knob-surround"><div class="knob-label"><span>41</span></div><div class="knob"></div> <span class="min">Min</span> <span class="max">Max</span><div class="ticks"><div class="tick activetick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div></div></div>
<script>
const e=document.getElementById("app");function t(t){const o=t.id.replace(/^[^a-z]+|[^\w:.-]+/gi,""),c=document.querySelector(`#${o} button`);if(c){c.classList.toggle("bg-active-button",t.is_default),c.classList.toggle("bg-button",!t.is_default);return void document.querySelector(`#${o} button img`).classList.toggle("hidden",!t.is_default)}const a=document.createElement("li");a.className="block m-2",a.id=o;const i=document.createElement("button");i.className="flex w-full py-2 px-4 rounded-md items-center justify-between",i.addEventListener("click",()=>async function(t){await fetch("/api/audio_devices/"+encodeURI(t),{method:"PATCH",body:JSON.stringify({is_default:!0}),headers:{"Content-Type":"application/json"}}),await n(e)}(t.id));const s=document.createElement("img");s.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0iZmVhdGhlciBmZWF0aGVyLWNoZWNrIj48cG9seWxpbmUgcG9pbnRzPSIyMCA2IDkgMTcgNCAxMiI+PC9wb2x5bGluZT48L3N2Zz4=";const l=document.createElement("span");return l.className="truncate",l.appendChild(document.createTextNode(t.name)),i.appendChild(l),i.appendChild(s),i.classList.add("text-white"),t.is_default?i.classList.add("bg-active-button"):(i.classList.add("bg-button"),s.classList.add("hidden")),a.appendChild(i),a}async function n(e){const n=await async function(){const e=await fetch("/api/audio_devices");return await e.json()}(),o=document.createDocumentFragment();n.items.map(t).forEach(e=>e&&o.appendChild(e)),e.appendChild(o)}n(e),setInterval(()=>{n(e)},4e3);const o=document.querySelector(".knob-label > span"),c=document.querySelector(".knob-surround");async function a(){const{level:e}=await async function(){const e=await fetch("/api/master_volume");return await e.json()}();l(e)}a(),setInterval(async()=>{null===window.oncontextmenu&&a()},4e3);const i=document.querySelector(".knob"),s=Array.from(document.querySelectorAll(".tick"));function l(e){const t=Math.round(e/100*270);["-moz-transform","-webkit-transform","-ms-transform"].forEach(e=>i.style[e]=`rotate(${t}deg)`);const n=Math.round(t/10)+1;s.forEach(e=>e.classList.remove("activetick")),s.slice(0,n).forEach(e=>e.classList.add("activetick")),o.innerText=Math.round(e),c.style.display="block"}let d=null,u=null;function r(e){e.preventDefault(),d=e.targetTouches[0].clientX,u=e.targetTouches[0].clientY,x()}function m(e){e.preventDefault(),i.removeEventListener("touchmove",r),i.removeEventListener("touchend",m),i.removeEventListener("touchcancel",m),M()}function f(e){e.preventDefault(),d=e.clientX,u=e.clientY,x()}function v(e){e.preventDefault(),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",v),M()}let p=null,h=null,y=null,b=null,g=null,L=0,I=null,w=0;function E(){window.oncontextmenu=()=>!1,p=i.offsetLeft-i.scrollLeft+i.clientLeft+i.offsetWidth/2,h=i.offsetTop-i.scrollTop+i.clientTop+i.offsetHeight/2,y=L,b=L,g=Math.atan2(u-h,d-p)}const C=2*Math.PI;function x(){b=y-g+Math.atan2(u-h,d-p),I=b/(C/3e3),I>=0&&I<=100?(L=b,w=I):I<0?w=0:I>100&&(w=100),l(w)}function M(){window.oncontextmenu=null,async function(e){await fetch("/api/master_volume",{method:"PATCH",body:JSON.stringify({level:Math.round(e)}),headers:{"Content-Type":"application/json"}})}(w)}i.addEventListener("touchstart",(function(e){e.preventDefault(),d=e.changedTouches[0].clientX,u=e.changedTouches[0].clientY,E(),i.addEventListener("touchmove",r),i.addEventListener("touchend",m),i.addEventListener("touchcancel",m)})),i.addEventListener("mousedown",(function(e){d=e.clientX,u=e.clientY,E(),document.addEventListener("mousemove",f),document.addEventListener("mouseup",v)}))
  </script>
</body>
</html>